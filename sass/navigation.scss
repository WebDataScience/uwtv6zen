/**
 * @file
 * Navigation Styling
 */

@import "base";
@import "compass/css3";




/*
 * Markup generated by theme_menu_tree().
 */

ul li.expanded {
  @if $legacy-support-for-ie6 or $legacy-support-for-ie7 {
    *list-style-image: url(../images/menu-expanded.png);
  }
  list-style-image: inline-image("menu-expanded.png");
  list-style-type: circle;
}
ul li.collapsed {
  @if $legacy-support-for-ie6 or $legacy-support-for-ie7 {
    *list-style-image: url(../images/menu-collapsed.png);
  }
  list-style-image: inline-image("menu-collapsed.png");
  list-style-type: disc;
}
ul li.leaf {
  @if $legacy-support-for-ie6 or $legacy-support-for-ie7 {
    *list-style-image: url(../images/menu-leaf.png);
  }
  list-style-image: none;
  list-style-type: none;
}
.sidebar{
  .item-list{
    ul{
      padding-left:0;
    }
  }
}

/*
 * The active item in a Drupal menu
 */

li a.active {
  color: #000;
}

/*
 * Navigation bar
 */

#navigation {
  /* overflow: hidden; */ /* Sometimes you want to prevent overlapping with main div. */

  .block {
    margin-bottom: 0;
  }

  .block-menu .block-title,
  .block-menu-block .block-title {
    @include element-invisible();
  }

  ul.links, /* Main menu and secondary menu links */
  ul.menu { /* Menu block links */
    margin: 0;
    padding: 0;
    text-align: left;

    li { /* A simple method to get navigation links to appear in one line. */
      float: left;
      padding: 0 10px 0 0;
      list-style-type: none;
      list-style-image: none;
    }
  }
}



/*
 * Global band menu
 */
 #global-menu {
  font-size: 90%;

  .menu{
    li{
      float:left;
      padding-right:5px;
      background-color:black;
      .outerContainer{
        height:35px;
        .innerContainer{
          padding-top:10px;

        }
        a:link,a:visited{
          text-decoration: none;
          color:$grey_medium;
          background-color: black;
          font-weight: bold;
          line-height:1.15em;
          border-right:1px solid $grey_medium;
          padding-right:5px;
        }
      }
      ul li{ // Flyouts
        .outerContainer{
          height:auto;
          .innerContainer{
            padding-left:5px;
            a:link,a:visited{
              border-right:0;
              background:none;
            }
          }
        }
      }
      ul li.last{
        padding-bottom:5px;
      }
    }
    li.last{ // Last menu item on the top level
      a:link,a:visited{
        border-right:0;
      }
    }
    li.expanded a:link,
    li.expanded a:visited{ // Top level menu items with flyout children
      background: url("../images/arrow_down_grey_light.png");
      background-repeat:no-repeat;
      background-position: 95% 60%;
      padding-right:15px;
    }
    li:hover > div div ul{
      background-color:black;
      color:white;
    }
  }
 }

/*
 * Global secondary menu
 */
 #global-secondary{
  
  text-transform: uppercase;
  .menu{
    height:25px;
    margin-top:10px;
    li{
      background-image: url("../images/menu-plus.png");
      background-position: 5px 50%;
      background-repeat: no-repeat;
      float: left;
      margin-left: 10px;
      padding-left: 15px;
      padding-top:0;
      padding-bottom:0;
      .outerContainer{
        //height:1em;
        .innerContainer{
          //vertical-align: bottom;
        }
      }
      a:link,a:visited{
        font-size:90%;
        font-weight: bold;
      }
    }
  }
 }





/*
 * Foter menus
 */
 #footer{ 
  .menu{
    .outerContainer{
      height:auto;
      .innerContainer{
        text-align:left;
      }
    }
  }
}

//
// Advanced checkbox hack
//  @see http://timpietrusky.com/advanced-checkbox-hack
//

/* Fix for Android */
body{
    -webkit-animation: bugfix infinite 1s;
}
@-webkit-keyframes bugfix { 
  from { padding: 0; } 
  to { padding: 0; } 
}
.menus input[type=checkbox]{
  position: absolute;
  top: -9999px;
  left: -9999px;
}
.menus label { 
  cursor: pointer;
  user-select: none;
  //display:none;
}

//
// Narrow (Mobile, phones, etc...)
// 
@include narrow {
  .dupe{
    display:none;
  }
  .menus{
    ul{
      display:none;
      height:auto;
      width:100%;
      padding:0;
      margin:0;
      li{
        background-color:$grey_medium;
        //border-top:1px solid black;
        list-style-type: none;
        .outerContainer{
          padding:.5em 0 .5em 1em;
          a:link,a:visited{
            background-color:$grey_medium;
            color:black;
            text-align:left;
            text-decoration: none;
            display:block;
            border-bottom:1px solid black;
          }
        }
        ul{
          li{
            list-style-type: none;
            list-style-image:none;
          }
        }
      }
    }
    input:checked ~ div ul.menu{
      display:block;
      position:relative;
      z-index: 5;
      > li{
        width:100%;
        // nested
        ul{
          display:none;
        }
      }
    }
  }
  #global-menu,
  #audience-menu{
    .menus{
      ul{
        position:absolute;
        top:73px;
        padding:0;
      }
      label{
        position:absolute;
        top:45px;
        right:8px;
        display:block;
        padding:0;
      }
    }
  } // /#global-menu
  #audience-menu{
    .menus{
      label{
        top:45px;
        right:50px;
      }
    }
  } // /#audience-menu
  #site-menu,
  #section-menu{
    .region-section-menu{
      padding-left:0;
      padding-right:0;
    }
    position:relative;
    border-top:1px solid $grey_dark;
    border-bottom:1px solid $grey_dark;
    background-color:$purple_medium;
    box-shadow:none;
    .block{
      margin-bottom:0;
    }
    .menus{
      h2{
        font-size: 1em;
        line-height:1em;
        padding: .75em 0 .75em .75em;
        color:$grey_dark;
        text-transform: uppercase;
        width:85%;
        background-color:white;
        border-right:1px solid $grey_dark;
        a{
          text-decoration: none;
        }
      }
      label{
        position:absolute;
        bottom:2px;
        right:7px;
        display:block;
      }
      input:checked ~ label{
        top:0;
      }
    }
  } // /#site-menu & /#section-menu
  .sidebars{
    .region-section-menu{
      display:none;
    }
  }
} // /breakpoint(narrow)


//
// Wide (Desktops and the like)
//
@include widest {


  /*
   * - Cleaning up default list styling (padding and list-style-*)
   * - Base flyout menu styling
   */
   .menus{
    h2.block-title{
      display:none;
    }
   }
  .menu{
    padding-left:0;
    margin-top:0;
    margin-bottom:0;
    font-size:0.75em;
    li,li.leaf,li.expanded,li.collapsed{
      @include transition-property(all);
      @include transition-duration(0.5s);
      list-style-type: none;
      list-style-image: none;

      .outerContainer{

        .innerContainer{

          .element {
            a{
              display:block;
            }
            a.active{
              //font-weight: normal;
            }
          }
        }
      }
      a:link,a:visited{
        text-decoration: none;
        padding:0 0em;

      }
    }
    li:hover > div div ul{
      display:block;
    }
    ul{
      display: none;
      position:absolute;
      font-size: inherit;
      li.leaf,li.expanded,li.collapsed{
        clear:both;
        width:100%;
        .outerContainer{
          height: auto;
          .innerContainer{
            text-align: left;
          }
        }
        a{
          text-align: left;
        }
      }
    }
  }
  .menu:after{
    content: "";
    clear:both;
    display:block;
  }
  /*
   * Site Navigation bar (horizontal, top level)
   */
  #site-menu{
    .menus{
      max-width:1200px;
      margin-right:auto;
      margin-left:auto;
    }
    .block{
      margin-bottom:0;// default is space between menu and body
    }
    position:relative;
    background-color:$purple_dark;
    @include single-box-shadow(rgba(black, 0.5), 0px, 6px, 6px, 0px);
    .menu {
      li{ // Root menu items
        float:left;

        a:link,a:visited{
          color:$grey_light;
          padding:0 1em;
          line-height: 1em;
        }
        .outerContainer{
          max-width: 10em;
          display: table;
          height: 4em;
          overflow: hidden;
          width:100%;
          .innerContainer{
            //border colors match background on #site-menu
            border-top:1px solid $purple_dark;
            border-bottom:1px solid $purple_dark;
            display: table-cell;
            vertical-align: middle;
            width: 100%;
            margin: 0 auto;
            text-align: center;
          }
        }

      }
      li.expanded{
        a:visited, a:link{ // Top level menu items with flyout children
          background: url("../images/arrow_down_grey_light.png");
          background-repeat:no-repeat;
          background-position: 95% 60%;
          padding-right:15px;
        }
      }
      li.active-trail{ // Root menu items in the active trail
        background-color: $grey_light;
        a:link,a:visited{
          color:$purple_dark;
        }
        li.active-trail {
          a:link,a:visited{
            color:$purple_dark;
          }
        }
        li.active-trail:hover{
          a:link,a:visited{
            color:$grey_light;
          }
        }
      }
      li:hover{
        background-color:$purple_dark;
        a:link,a:visited{
          color: $grey_light;
        }
      }
      li:hover > div div ul{
        background-color:$purple_dark;
      }
      // Nested menu items
      ul{
        z-index:11;
        border-top:1.25em solid $purple_dark;
        li{

          border-bottom:1px dotted $grey_light;
          .outerContainer{
            max-width:20em;
            a:link,a:visited{
              line-height: 2em;
            }
          }
        }
        li.is-parent,li.first,li.leaf{
          a:link,a:visited{
            background-image:none;
          }
        }
        li:hover{
          background-color:$purple_medium;
          a:link,a:visited{
            color:$purple_dark;
          }
          a.active:hover{
            color: $purple_dark;
            background-color:$purple_medium
          }
        }
        li.active a:link,li.active a:visited{
          color:$purple_dark;
          background-color:$purple_medium;
        }
        li.active-trail:hover a.active:link, li.active-trail:hover a.active:visited{
          color: $purple_dark;
        }
      }
    }
    .menu li.expanded{
      .innerContainer{
        li{
          .innerContainer{
            border-top:0;
            border-bottom:0;
          }
        }
      }
    }
  }
  /**
    * Subsite navigation (vertical)
    */

  .region-section-menu{
    .block-menu-block.first{
      .block-title{
        padding-top:0.5em;
        line-height: 1.5em;
        text-transform: uppercase;
        font-size:0.75em;
        font-family: $base-font-family;
        font-weight:bold;
        background-color:$grey_light;
        border-left:0.9em solid $grey_light;
        margin-top:5px;
      }
    }
    ul.menu{
      //@include single-box-shadow(rgba(black, 0.5), -5px, -5px, 10px, -7px, inset);
      li{
          color:$purple_dark;
          background-color:$grey_light;
          border-left:0.5em solid $purple_medium;
        a:link,a:visited{
          padding:0.15em 0 0.15em 0.25em;
          display:block;
          border-bottom:1px dotted $grey_medium;

          @include transition-property(all);
          @include transition-duration(0.5s);

        }
        a.active{
          color:$purple_dark;
          background-color:$purple_medium;
          border-bottom:none;
          font-weight: bold;
        }
        a:hover{
          background-color:$purple_medium;
          color: $purple_dark;
        }
      }
      li.active{
        border-left:0.5em solid $purple_dark;
      }
      .outerContainer{
        height:auto;
        overflow-x:hidden;
        .innerContainer{
          text-align: left;
          .element{
            a{
              display:block;
            }
          }
        }
      }
      // Nested
      ul{
        margin-left:0.5em;
        box-shadow: none;
        display:block;
        position: relative;


        li{
          padding-right:0;
          //border-left:0.5em solid $grey_light;
          border-left:0;
          a:link, a:visited{
            padding-left:1em;
            padding-right:0.5em;
          }
        }
      }
    }
  }

  // Hiding the uppermost section menu on the widest breakpoint 
  #section-menu{
    display:none;
  }


} // /@breakpoint(widest)

/*******************************************************************************
 ******************** Per Section Navigation Customizations ********************
 ******************************************************************************/
/*
// About UW Tacoma
.section-875 #site-menu .menu:first-child > li.last{
  background-color: $gold_medium;
  a:link,a:visited{
    color:$purple_dark;
  }
}
*/
